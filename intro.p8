pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--picoheads intro

function _init()
	--texts
	text={
		ln1="",
		ln2="",
		ln3="",
		ln4="",
		txt1="wir entwickeln",
		txt2="presented by picoheads",
		txt3="episode #9:",
		txt4="buh!",
		x=10,
		ln1_y=15,
		ln2_y=26,
		ln3_y=98,
		ln4_y=112,
		speed=3,
		⧗=5
	}
	
	--cursor
	cur={
		x=-10,
		y=-10,
		c=8,
		blink=30
	}
	--avatars
	mspr=1
	ml="mario"
	mx=-7-(#ml*4)
	mtx=38
	kl="klemens"
	kspr=2
	kx=128+(#kl*4)
	ktx=78
	avy=50
	av_done=false
	⧗={
		ending=120,
		cur=30,
		glitches=70
	}
	
	music(3)
end

--function center_text(_t)
--	return (128-(#_t*4))/2
--end

function _update60()
	⧗.cur-=1
	if (⧗.cur==0) ⧗.cur=cur.blink
	
	--cursor blinking
	if ⧗.cur<cur.blink/2 then
		cur.c=0
	else
		cur.c=8
	end
	
	--typing timer
	text.⧗-=1
	if (text.⧗==0) then
		text.⧗=text.speed+flr(rnd(10))
	end
	
	--title animation
	if #text.ln1<#text.txt1 then
		if text.⧗==1 then
			text.ln1=sub(text.txt1,0,#text.ln1+1)
		end
		cur.x = text.x+#text.ln1*4
		cur.y = text.ln1_y-1
	
	elseif #text.ln2<#text.txt2 then
		if text.⧗==1 then
			text.ln2=sub(text.txt2,0,#text.ln2+1)
		end
		cur.x = text.x+#text.ln2*4
		cur.y = text.ln2_y-1
	else
		titles_done=true
	end
	
	--avatars animation
	if titles_done then
		if not av_done then
			local mdx=((mtx-mx)/4)*0.4
			local kdx=((kx-ktx)/4)*0.4
			mx+=mdx
			kx-=kdx
 		if (mdx==0
 					and kdx==0) then
				av_done=true
 		end
		end
	end
	
	if av_done then
		if #text.ln3<#text.txt3 then
			if text.⧗==1 then
				text.ln3=sub(text.txt3,0,#text.ln3+1)
			end
			cur.x = text.x+#text.ln3*4
			cur.y = text.ln3_y-1
		elseif #text.ln4<#text.txt4 then
			if text.⧗==1 then
				text.ln4=sub(text.txt4,0,#text.ln4+1)
			end
			cur.x = text.x+#text.ln4*4
			cur.y = text.ln4_y-1
		end
	end
		
	--ending
	if #text.ln4==#text.txt4 then
		if ⧗.ending>0 then
			⧗.ending-=1
		end
	end		
end

function _draw()
	cls()
	rectfill(0,0,127,127,0)
	rectfill(cur.x,cur.y,cur.x+4,cur.y+5,cur.c)
	print(text.ln1,text.x,text.ln1_y,7) --title
	print(text.ln2,text.x,text.ln2_y,7) --tagline
	print(text.ln3,text.x,text.ln3_y,7) --tagline
	print(text.ln4,text.x,text.ln4_y,7) --tagline
	--mario
	sspr(8,0,7,16,mx,avy)
	print(ml,mx-(#ml*2)+3,avy+18,7)
	--klemens
	sspr(16,0,7,16,kx,avy)
	print(kl,kx-(#kl*2)+3,avy+18,7)

	if ⧗.ending==0 then
		
		if (⧗.glitches>0) ⧗.glitches-=1
		
		if ⧗.glitches==69 then
			music(2)
		elseif ⧗.glitches==40 then
			poke(0x5f2c, 1) -- horizontal stretch, 64x128
		elseif ⧗.glitches==30 then
			poke(0x5f2c, 2) -- vertical stretch, 128x64
		elseif ⧗.glitches > 0 then
			pal(flr(rnd(16)),flr(rnd(16)))
		end
	end
end
__gfx__
00000000007770000077700000000000000000000000000000444400004440000000000000000000000000000000000000000000000000000000000000000000
00000000077777000777770000000000000000000000000004444440044444000000000000000000000000000000000000000000000000000000000000000000
00700700888888808888888000000000000000000000000011114440111111100000000000000000000000000000000000000000000000000000000000000000
000770008087808080878080000000000000000000000000131f14401c1f1c100000000000000000000000000000000000000000000000000000000000000000
000770008887888088878880000000000000000000000000111f1140111f11100000000000000000000000000000000000000000000000000000000000000000
0070070007777700077777000000000000000000000000000fffff400f444f000000000000000000000000000000000000000000000000000000000000000000
0000000007000700070007000000000000000000000000000f777f00047774000000000000000000000000000000000000000000000000000000000000000000
00000000777777707777777000000000000000000000000011fff110144444100000000000000000000000000000000000000000000000000000000000000000
00000000707770707077707000000000000000000000000010111010104440100000000000000000000000000000000000000000000000000000000000000000
00000000700700707007007000000000000000000000000010111010f01a10f00000000000000000000000000000000000000000000000000000000000000000
00000000707770707077707000000000000000000000000010111010f0a1a0f00000000000000000000000000000000000000000000000000000000000000000
000000007007007070070070000000000000000000000000f0ccc0f0f01110f00000000000000000000000000000000000000000000000000000000000000000
00000000007770000077700000000000000000000000000000c0c00000ccc0000000000000000000000000000000000000000000000000000000000000000000
00000000007070000070700000000000000000000000000000c0c00000c0c0000000000000000000000000000000000000000000000000000000000000000000
00000000007070000070700000000000000000000000000000c0c00000c0c0000000000000000000000000000000000000000000000000000000000000000000
00000000007070000070700000000000000000000000000000404000004040000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0110000010050100500c1001005012050120501205000000100501005010050000001505015050150500000014050140501405014050140501405000000000001005010050000001005012050120501205000000
01100000100501005010050030001705017050170500f0001505015050150501505015050150500f00003000100501005003000100501c0501c0501c050030001905019050190500000015050150501505000000
01100000140501405014050205001205012050120501205012050120501205012050120501205019500185001a0501a0501d5001a050190501905019050005001505015050150500000017050170501705000000
01100000167532a155162530635416155164541d453140521f0000c3000730005300073000e30013300153000d000183001a3001d300183000e30009300073000d0000c30011300133001330016300183001b300
01100000155521335314452125531035513052114530e0540015000150001500015000150001500015000155183000e30009300073000d0000c30011300133001330016300183001b30000000000000000000000
01100000137551725616557117550e5560f1570c555124560d0070d0000d0000d0000d0000d0000d0000d0000d0000d0000d0000d0000d0000d0000d0000d0000070000700007000070000700007000070000700
01100000362532a355064530625406555367541165411650116501165011600116501165011650116501165500000000000000000000000000000000000000000000000000000000000000000000000000000000
0110000030100301000c30011300133000c3000015100151001510015100151001510015100151001510015100151001510910005100051000510005100051000520005200052000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
01 00414243
02 01414243
04 03050406
01 00454647
00 01454647
04 02404040
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000

